
<html>
<head>
  <META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
    <title> Picture study </title>


    <!--  general js utilities -->
    <script src="js/general_utils/jquery-1.11.1.min.js "></script>
    <script src="js/general_utils/jquery-ui.min.js"></script>
    <script src="js/general_utils/underscore-min.js"></script>
    <script src="js/general_utils/sweetalert.min.js"></script>
    <script src="js/general_utils/bootstrap.min.js"></script>

    <!-- experiment logic, and experiment utilities -->
    <script src="js/exp_run/exp-V2.js"></script>
    <script src="js/exp_run/stream-V2.js"></script>
    <script src="js/exp_run/mmturkey.js"></script>
    <script src="js/exp_run/browserCheck.js"></script>
    <script src="js/exp_run/utils.js"></script>
    <script src="js/exp_run/preload.js"></script>
    <script src="js/exp_run/uniqueturker.js"></script>

    <!-- main experiment logic: -->
    <script src="js/exp_run/exp1_SA.js"></script>

    <!--CSS-->
    <link href="css/jquery-ui.min.css" rel="stylesheet" type="text/css"/>
    <link href="css/style.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- webgazer tools -->
    <script src="js/webgazer_tools/resize_canvas.js"></script>
    <script src="js/webgazer_tools/calibration_functions.js"></script>
    <script src="js/webgazer_tools/main.js"></script>
    <script src="js/webgazer_tools/precision_calculation.js"></script>
    <script src="js/webgazer_tools/precision_store_points.js"></script>

    <!-- experiment files for stimuli-->
    <script src="js/exp_files/img_pairs.js"></script> <!-- image pairs -->
    <script src="js/exp_files/audio_names.js"></script> <!-- audio recording names -->
    

    <!-- INSERT UNIQUE TURKER ID HERE -->
    <script type="text/JavaScript">
    $(document).ready(function(){
      var ut_id = "[INSERT YOUR UNIQUE TURKER ID HERE]"
      if (UTWorkerLimitReached(ut_id)) {
        $(".slide").hide();
        $("body").html("You have already completed the maximum number of HITs allowed by this requester. Please click 'Return HIT' to avoid any impact on your approval rating.");
      }});
    </script>


  </head>

  <body onload="init_explogic();">
    <script src="js/webgazer_tools/webgazer.js" type="text/javascript"></script>

    <div class="progress" style="float:right">
                  <span>Progress:</span>
                    <div class="bar-wrapper">
                      <div class="bar" width="0%">
                    </div>
                  </div>
                </div>

    <noscript>This task requires JavaScript.</noscript>
    <div class="slide" id="i0" >
      <div class="text-center">
        <br>
        <br>
        <img src="stanford.png" alt="Stanford University">
        <br>
        <br>
        <p id="study_title">
          <b> Picture Study </b></p>

        <!-- <br> -->

        <div class="card bg-light mb-3">
          <div class="card-body">
            <p class="card-text">In this task, you will see several pairs of images and hear an audio description of one of them.
              <br> Since this study is made for children, some of the phrases may seem strange.</p>
            </div>
          </div>



          <div class="card border-danger mb-3" >
            <div class="card-body text-danger">
              <p class="card-text">
                <b>Please read all the following information carefully before deciding whether to accept the task. </b></p>
                During this task, your eye movements will be recorded using your web camera. <br>
                Unfortunately, you will be unable to complete this task if you have any uncorrected vision impairments (e.g.,  amblyopia, or 'lazy eye').
                If you use glasses/contact lenses for near or farsightedness, that's fine.
                <br>
                We will NOT record images of your face at any point: we will only record the coordinates of your eye movements. <br>
              </div>
            </div>

            <div class="card border-success mb-3">
              <div class="card-body">
                <h5 class="card-title"> Browser Width</h5>
                <p class="card-text"> Your browser window must be at least 1280 pixels wide, while fitting within your computer display: you must be able to see everything in the browser window.
                  <br>
                  Please mazimize your browser now, and keep it maximized throughout the task.
                  <br>
                  If you're unable to maximize it to at least 1280 pixels wide, do not accept the task.  you won't be able to start the task and will have to return it. </b></p>
                  <!--b> Your current browser width is: <span id="dimensions"></span></b>
                  <script>
                  $(window).resize(function() {
                    $("#dimensions").html($(window).width());
                  }).resize(); </script-->
                </div>
              </div>

              <div class="card border-success mb-3">
                <div class="card-body">
                  <h5 class="card-title">Sound</h5>
                  <p class="card-text">You <b> must </b> be able to play sound on your computer: you won't be able to complete the task satisfactorily if not.
                  </p>
                </div>
              </div>


              <div class="card border-success mb-3">
                <div class="card-body">
                  <h5 class="card-title"> Browser version </h5>

                  <p class="card-text">You must be using one of the following browser versions:
                    <ul>
                      <p class="text-left">
                        <li> <b> Google Chrome (version 53 or newer) - (Recommended browser) </b> </li>
                        <li> Microsoft Edge (version 12 or newer) </li>
                        <li> Mozilla Firefox (version 42 or newer) </li>
                        <li> Opera (version 40 or newer) </li>
                        <li> Safari (version 11 or newer) </li>
                      </p>
                    </ul>
                  </p>
                </div>
              </div>


              <div class="card border-success mb-3">
                <div class="card-body">
                  <h5 class="card-title"> Device and Lighting </h5>
                  <p class="card-text">
                    <ul>
                      <li> You must be using a desktop or laptop with a web camera - you cannot use a tablet or cell phone </li>
                      <li> Your device must be placed on a hard surface (e.g. table or desk), with the camera at your eye level </li>
                      <li> You must be in a brightly lit room, with your face fully illuminated  </li>
                      <li> You must stay in the same position and keep your head still throughout the calibration phase and task (around 7.5 mins)</li>
                      <li> You must keep your browser maximized throughout the task </li>
                      <li> If you can read the screen comfortably without glasses, please complete the task without them </li>
                    </ul>
                  </p>
                </div>
              </div>

              <div class="card border-success mb-3">
                <div class="card-body">
                  <h5 class="card-title"> Calibration Phase </h5>
                  <p class="card-text">
                    Once you click Start, you will be enter a 'Calibration' phase before starting the task, where you can check that your head is in the correct position and your face is fully illuminated.
                    <br>
                    <b> IMPORTANT: You may need to perform the Calibration several times to achieve the required accuracy score (50%).
                      <br>
                      If you are not in a brightly lit room, with your device on a hard surface and the camera at eye level, you may be unable to achieve the required Accuracy score, and will have to return the task. </b>
                      <br>
                      <br>
                      After completing the Calibration, you will proceed to the task. At the end, you will be asked some brief questions about yourself. The entire task will take around 8 minutes in total.
                      <br>
                    </p>
                  </div>
                </div>

                Please only click <b> Start </b> if you agree to all the above.

                <br>
                <br>

                <p id="windowsize_err"><font color="red"> Your browser window must be at least 1280 pixels wide. Please maximize it. If you cannot maximize it to at least 1280 pixels wide, please return the task. </font></p>
                <button id="start_button" type="button">Start</button> <br><br>

                <p id="legal"> <b>LEGAL INFORMATION:</b>
                  By answering the following questions, you are participating in a study being conducted by the Stanford Department of Linguistics. If you have questions about this research, please contact <b>Elizabeth Swanson</b> at <a href="mailto:elizswan@stanford.edu">elizswan@stanford.edu</a>. You must be at least 18 years old to participate. Your participation in this research is voluntary. You may decline to answer any or all of the following questions. You may decline further participation, at any time, without adverse consequences. Your anonymity is assured; the researchers who have requested your participation will not receive any personal information about you.
                  <br>
                  If you agree to participate, please proceed to the study tasks. </p>
                </div>
              </div>


              <div class="slide"  id="training_and_calibration">
                <!-- <p> CALIBRATION INSTRUCTIONS </p> -->
                <canvas id="plotting_canvas" width="1" height="1" style="cursor:crosshair;"></canvas>

                <!-- NAVIGATION BAR -->
                <nav id="webgazerNavbar" class="navbar navbar-nav navbar-fixed-top">
                  <div class="container-fluid">
                    <div class="navbar-header">
                      <button id="start_camera" onclick="_s.start_camera()">Start Camera</button>
                      <button id="start_calibration" onclick="Restart()"> Calibrate</button>
                      <!-- <button id="restart_calibration" onclick="Restart()">recalibrate</button> <--hide until done once -->
                      <button id = 'begin_task' onclick="_s.finish_calibration_start_task()"> Begin Task</button>
                      <button id = 'helpbutton' onclick="helpModalShow()"> Help </button>

                      <a class id="Accuracy"> </a>
                    </div>
                  </div>
                </nav>


                <!-- Calibration points -->
                <div class="calibrationDiv">
                  <input type="button" class="Calibration" id="Pt1"></input>
                  <input type="button" class="Calibration" id="Pt2"></input>
                  <input type="button" class="Calibration" id="Pt3"></input>
                  <input type="button" class="Calibration" id="Pt4"></input>
                  <input type="button" class="Calibration" id="Pt5"></input>
                  <input type="button" class="Calibration" id="Pt6"></input>
                  <input type="button" class="Calibration" id="Pt7"></input>
                  <input type="button" class="Calibration" id="Pt8"></input>
                  <input type="button" class="Calibration" id="Pt9"></input>
                </div>

                <!-- Modal -->
                <div id="helpModal" class="modal fade" role="dialog">
                  <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                      <div class="modal-body">
                        <img src="helpmodalimg.png" class="img-responsive">

                      </div>
                      <div class="modal-footer">
                        <button id="closeBtn" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="_s.start_camera()">Start Camera</button>
                      </div>
                    </div>

                  </div>
                </div>

              </div>


              <div class="slide" id="sound_test">
              <br>
              <br>
              <h2 align="center">Sound test</h2>
              <p class="text-center" id="soundtest_text">Now we will test that your sound is working.
                <br>
                Press the play button to listen to the audio recording. Then, answer the question based on the recording. If you do not respond correctly you will be asked to listen again. You must enter the correct answer before continuing.
                <br>
                <br>
              <audio id="soundtest_audio" controls src='soundtest.wav' onplay="_s.compQuestion()"> </audio></p>
              <br>
              <br>
              <div class="text-center" id="compQ" style="display: none;">What animal scared Maria?
              <br>  
              <br> 
              <input class="answertext" type="text" id="compResponse" style="display: none;"></input> 
              <br>
              <br>
              <button id="compButton" type="button" class="btn btn-default" style="display: none;" onclick="_s.checkAnswer()">Continue</button>
              </div>
              <br>
              <p id="compBlankError" style="color:red; display: none;" align="center">Please answer the question.</p>
              <br>
              <p id="compWrongError" style="color:red; display: none;" align="center">Please listen again and answer the question correctly.</p>
              </div> 


              <div class="slide" id="instructions">
              <br>
              <br>
              <h2 align="center">Instructions</h2>
              <p class="text-center" id="intro_text">Now, you will see several pairs of images and hear an audio description of one of them. After each pair of images, you will click "Continue" to move to the next pair.
              <br> Try to look at the picture that is described by the narrator. Since this study is made for children, some of the phrases may seem strange.
              <br>
              <br>
              <button id="start_task_button" type="button" class="btn btn-default" onclick="_s.start_task()">Start task</button>
              </p>
              </div> 


              <div class="slide" id="single_trial">
                <br>
                <br>
                <p class="text-center" id="click_img_text" style="color:red; display: none;">Please click on the image you think the narrator was talking about.

                  <!--audio id="aud" controls autoplay> </audio-->
                </p>
                <div class ="imgwrapper" id="imgwrapper">
                </div>
                <br>
                <div class="text-center">
                  <button id = "continue_button" onclick="_s.next_trial()" style="width:100px; height:30px"> Continue </button> </p>
                  <!--button id = "next_button" onclick="_s.next_trial()" style="width:50px; height:30px"> Next </button> </p-->
                  <!--p class="err"><font color="red">Please select a person </font></p-->
                </div>
              </div>



              <div class="slide"  id="subj_info">
                <div class="text-center">
                  <br>
                  <br>
                  <p class="subj_info_title">Please answer the brief questions below.</p>
                  <br>
                  <div class="subj_info_title">About you</div>
                </div>

                <div class="text-left" style="margin-left:50px">
                  <p>First Language(s) (the language(s) you spoke at home as a child): <input type="text" id="language"/> </p>

                  <p>Gender:
                    <select id="gender">
                      <label><option value=""/></label>
                      <label><option value="Male"/>Male</label>
                      <label><option value="Female"/>Female</label>
                      <label><option value="Other"/>Other</label>
                    </select>
                  </p>

                  <p>Age: <input type="text" id="participantage"/></p>

                  <p>Prolific ID: <input type="text" id="prolific_id"/></p>

                </div>

                <div class = "text-center">
                  <div class="subj_info_title">About the task </div> </div>

                  <div class="text-left" style="margin-left:50px">

                  <p>Do you need to wear glasses (or contact lenses) to correct your vision?:
                    <select id="eyesight">
                      <label><option value="-1"/></label>
                      <label><option value="none"/>No</label>
                      <label><option value="nearsighted"/>Yes, I'm nearsighted (can't see well far away)</label>
                      <label><option value="farsighted"/>Yes, I'm farsighted (can't see well close up)</label>
                    </select>
                  </p>
                  <p>During the task, were you wearing glasses or contact lenses?:
                    <select id="eyesight_task">
                      <label><option value="-1"/></label>
                      <label><option value="neither"/>No, neither</label>
                      <label><option value="glasses"/>Glasses</label>
                      <label><option value="contacts"/>Contact lenses</label>
                    </select>
                  </p>

                  <p>(Optional) Do you have any comments about the task (any problems, etc.) ? </p>
                  <textarea id="comments" rows="3" cols="50"></textarea>
                  <br>
                </div>
                <div class="text-center">
                  <p class="err_part2" style="display: none;"><font color="red">Please complete all non-optional questions! </font></p>
                  <button onclick="_s.submit()"> Finish </button>
                </div>
              </div>


              <div id="thanks" class="slide js" >
                <br>
                <p  class="text-center">Thanks for your time! One moment please...</p>
              </div>

            </body>
            </html>
